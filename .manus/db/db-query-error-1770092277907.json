{
  "query": "-- إسناد دور \"مكتب المشاريع\" لأحمد محمد\nINSERT INTO user_roles (user_id, role_id, assigned_by, assigned_at)\nSELECT \n  (SELECT id FROM users WHERE name = 'أحمد محمد' LIMIT 1),\n  'projects_office',\n  1,\n  NOW()\nWHERE NOT EXISTS (\n  SELECT 1 FROM user_roles \n  WHERE user_id = (SELECT id FROM users WHERE name = 'أحمد محمد' LIMIT 1)\n  AND role_id = 'projects_office'\n);\n\n-- إسناد دور \"فريق ميداني\" لخالد عبدالله\nINSERT INTO user_roles (user_id, role_id, assigned_by, assigned_at)\nSELECT \n  (SELECT id FROM users WHERE name = 'خالد عبدالله' LIMIT 1),\n  'field_team',\n  1,\n  NOW()\nWHERE NOT EXISTS (\n  SELECT 1 FROM user_roles \n  WHERE user_id = (SELECT id FROM users WHERE name = 'خالد عبدالله' LIMIT 1)\n  AND role_id = 'field_team'\n);\n\n-- إسناد دور \"مالية\" لفاطمة أحمد\nINSERT INTO user_roles (user_id, role_id, assigned_by, assigned_at)\nSELECT \n  (SELECT id FROM users WHERE name = 'فاطمة أحمد' LIMIT 1),\n  'financial',\n  1,\n  NOW()\nWHERE NOT EXISTS (\n  SELECT 1 FROM user_roles \n  WHERE user_id = (SELECT id FROM users WHERE name = 'فاطمة أحمد' LIMIT 1)\n  AND role_id = 'financial'\n);\n\n-- إسناد دور \"طالب خدمة\" لمحمد سعيد\nINSERT INTO user_roles (user_id, role_id, assigned_by, assigned_at)\nSELECT \n  (SELECT id FROM users WHERE name = 'محمد سعيد' LIMIT 1),\n  'service_requester',\n  1,\n  NOW()\nWHERE NOT EXISTS (\n  SELECT 1 FROM user_roles \n  WHERE user_id = (SELECT id FROM users WHERE name = 'محمد سعيد' LIMIT 1)\n  AND role_id = 'service_requester'\n);\n\n-- عرض النتائج\nSELECT \n  u.name AS user_name,\n  r.nameAr AS role_name,\n  ur.assigned_at\nFROM user_roles ur\nJOIN users u ON ur.user_id = u.id\nJOIN roles r ON ur.role_id = r.id\nWHERE u.name IN ('أحمد محمد', 'خالد عبدالله', 'فاطمة أحمد', 'محمد سعيد')\nORDER BY ur.assigned_at DESC;",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 47svcMedBpAqYJW.4862cbe35d00 --database 6TUn3HPSK4hJ6Fxv2aR83j --execute -- إسناد دور \"مكتب المشاريع\" لأحمد محمد\nINSERT INTO user_roles (user_id, role_id, assigned_by, assigned_at)\nSELECT \n  (SELECT id FROM users WHERE name = 'أحمد محمد' LIMIT 1),\n  'projects_office',\n  1,\n  NOW()\nWHERE NOT EXISTS (\n  SELECT 1 FROM user_roles \n  WHERE user_id = (SELECT id FROM users WHERE name = 'أحمد محمد' LIMIT 1)\n  AND role_id = 'projects_office'\n);\n\n-- إسناد دور \"فريق ميداني\" لخالد عبدالله\nINSERT INTO user_roles (user_id, role_id, assigned_by, assigned_at)\nSELECT \n  (SELECT id FROM users WHERE name = 'خالد عبدالله' LIMIT 1),\n  'field_team',\n  1,\n  NOW()\nWHERE NOT EXISTS (\n  SELECT 1 FROM user_roles \n  WHERE user_id = (SELECT id FROM users WHERE name = 'خالد عبدالله' LIMIT 1)\n  AND role_id = 'field_team'\n);\n\n-- إسناد دور \"مالية\" لفاطمة أحمد\nINSERT INTO user_roles (user_id, role_id, assigned_by, assigned_at)\nSELECT \n  (SELECT id FROM users WHERE name = 'فاطمة أحمد' LIMIT 1),\n  'financial',\n  1,\n  NOW()\nWHERE NOT EXISTS (\n  SELECT 1 FROM user_roles \n  WHERE user_id = (SELECT id FROM users WHERE name = 'فاطمة أحمد' LIMIT 1)\n  AND role_id = 'financial'\n);\n\n-- إسناد دور \"طالب خدمة\" لمحمد سعيد\nINSERT INTO user_roles (user_id, role_id, assigned_by, assigned_at)\nSELECT \n  (SELECT id FROM users WHERE name = 'محمد سعيد' LIMIT 1),\n  'service_requester',\n  1,\n  NOW()\nWHERE NOT EXISTS (\n  SELECT 1 FROM user_roles \n  WHERE user_id = (SELECT id FROM users WHERE name = 'محمد سعيد' LIMIT 1)\n  AND role_id = 'service_requester'\n);\n\n-- عرض النتائج\nSELECT \n  u.name AS user_name,\n  r.nameAr AS role_name,\n  ur.assigned_at\nFROM user_roles ur\nJOIN users u ON ur.user_id = u.id\nJOIN roles r ON ur.role_id = r.id\nWHERE u.name IN ('أحمد محمد', 'خالد عبدالله', 'فاطمة أحمد', 'محمد سعيد')\nORDER BY ur.assigned_at DESC;",
  "returncode": 1,
  "logs": [
    "ERROR 1048 (23000) at line 2: Column 'user_id' cannot be null"
  ]
}