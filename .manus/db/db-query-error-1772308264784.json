{
  "query": "\n-- حفظ معرف مدير النظام أولاً\nSET @admin_id = (SELECT id FROM users WHERE role = 'admin' ORDER BY createdAt ASC LIMIT 1);\n\n-- تفريغ جداول البيانات المالية\nDELETE FROM disbursement_orders;\nDELETE FROM disbursement_requests;\nDELETE FROM payments;\nDELETE FROM contract_payments;\n\n-- تفريغ جداول العقود\nDELETE FROM contract_modification_logs;\nDELETE FROM contract_modification_requests;\nDELETE FROM contract_clause_values;\nDELETE FROM contracts_enhanced;\nDELETE FROM contracts;\nDELETE FROM quantity_schedules;\n\n-- تفريغ جداول الموردين وعروض الأسعار\nDELETE FROM quotations;\nDELETE FROM suppliers;\n\n-- تفريغ جداول المشاريع\nDELETE FROM progress_reports;\nDELETE FROM final_reports;\nDELETE FROM handovers;\nDELETE FROM project_phases;\nDELETE FROM projects;\n\n-- تفريغ جداول الزيارات الميدانية\nDELETE FROM field_visit_reports;\nDELETE FROM quick_response_reports;\nDELETE FROM field_visits;\n\n-- تفريغ جداول الطلبات\nDELETE FROM request_sub_stage_tracking;\nDELETE FROM request_stage_tracking;\nDELETE FROM satisfaction_surveys;\nDELETE FROM survey_responses;\nDELETE FROM escalation_logs;\nDELETE FROM request_comments;\nDELETE FROM request_history;\nDELETE FROM request_attachments;\nDELETE FROM mosque_requests;\n\n-- تفريغ جداول المساجد\nDELETE FROM mosque_images;\nDELETE FROM mosques;\n\n-- تفريغ جداول التبرعات\nDELETE FROM donations;\nDELETE FROM donation_opportunities;\n\n-- تفريغ جداول الإشعارات\nDELETE FROM notifications;\n\n-- تفريغ جداول التدقيق\nDELETE FROM audit_logs;\nDELETE FROM permissions_audit_log;\n\n-- تفريغ المستخدمين مع الاحتفاظ بمدير النظام\nDELETE FROM user_roles WHERE userId != @admin_id;\nDELETE FROM user_permissions WHERE userId != @admin_id;\nDELETE FROM password_reset_tokens WHERE userId != @admin_id;\nDELETE FROM users WHERE id != @admin_id;\n\n-- إعادة تعيين تسلسلات الأرقام\nUPDATE contract_number_sequence SET lastNumber = 0;\nUPDATE project_number_sequence SET lastNumber = 0;\nUPDATE request_number_sequence SET lastNumber = 0;\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 47svcMedBpAqYJW.4862cbe35d00 --database 6TUn3HPSK4hJ6Fxv2aR83j --execute \n-- حفظ معرف مدير النظام أولاً\nSET @admin_id = (SELECT id FROM users WHERE role = 'admin' ORDER BY createdAt ASC LIMIT 1);\n\n-- تفريغ جداول البيانات المالية\nDELETE FROM disbursement_orders;\nDELETE FROM disbursement_requests;\nDELETE FROM payments;\nDELETE FROM contract_payments;\n\n-- تفريغ جداول العقود\nDELETE FROM contract_modification_logs;\nDELETE FROM contract_modification_requests;\nDELETE FROM contract_clause_values;\nDELETE FROM contracts_enhanced;\nDELETE FROM contracts;\nDELETE FROM quantity_schedules;\n\n-- تفريغ جداول الموردين وعروض الأسعار\nDELETE FROM quotations;\nDELETE FROM suppliers;\n\n-- تفريغ جداول المشاريع\nDELETE FROM progress_reports;\nDELETE FROM final_reports;\nDELETE FROM handovers;\nDELETE FROM project_phases;\nDELETE FROM projects;\n\n-- تفريغ جداول الزيارات الميدانية\nDELETE FROM field_visit_reports;\nDELETE FROM quick_response_reports;\nDELETE FROM field_visits;\n\n-- تفريغ جداول الطلبات\nDELETE FROM request_sub_stage_tracking;\nDELETE FROM request_stage_tracking;\nDELETE FROM satisfaction_surveys;\nDELETE FROM survey_responses;\nDELETE FROM escalation_logs;\nDELETE FROM request_comments;\nDELETE FROM request_history;\nDELETE FROM request_attachments;\nDELETE FROM mosque_requests;\n\n-- تفريغ جداول المساجد\nDELETE FROM mosque_images;\nDELETE FROM mosques;\n\n-- تفريغ جداول التبرعات\nDELETE FROM donations;\nDELETE FROM donation_opportunities;\n\n-- تفريغ جداول الإشعارات\nDELETE FROM notifications;\n\n-- تفريغ جداول التدقيق\nDELETE FROM audit_logs;\nDELETE FROM permissions_audit_log;\n\n-- تفريغ المستخدمين مع الاحتفاظ بمدير النظام\nDELETE FROM user_roles WHERE userId != @admin_id;\nDELETE FROM user_permissions WHERE userId != @admin_id;\nDELETE FROM password_reset_tokens WHERE userId != @admin_id;\nDELETE FROM users WHERE id != @admin_id;\n\n-- إعادة تعيين تسلسلات الأرقام\nUPDATE contract_number_sequence SET lastNumber = 0;\nUPDATE project_number_sequence SET lastNumber = 0;\nUPDATE request_number_sequence SET lastNumber = 0;\n",
  "returncode": 1,
  "logs": [
    "ERROR 1146 (42S02) at line 24: Table '6tun3hpsk4hj6fxv2ar83j.progress_reports' doesn't exist"
  ]
}