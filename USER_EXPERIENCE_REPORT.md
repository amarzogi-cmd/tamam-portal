# تقرير تجربة المستخدم وجوانب النقص

## تاريخ التقرير: 11 يناير 2026

---

## ملخص التجربة

تم اختبار دورة طلب كاملة من مرحلة التقديم إلى مرحلة الإغلاق. الطلب المختبر: DAA-MK41MCHV-03CD (دعائم - مسجد تجربة حسن)

---

## المراحل الـ 11 المعتمدة

| # | المرحلة | الكود | الحالة |
|---|---------|-------|--------|
| 1 | تقديم الطلب | submitted | ✅ يعمل |
| 2 | المراجعة الأولية | initial_review | ✅ يعمل |
| 3 | الزيارة الميدانية | field_visit | ✅ يعمل |
| 4 | التقييم الفني | technical_eval | ✅ يعمل (4 خيارات) |
| 5 | إعداد جدول الكميات | boq_preparation | ✅ يعمل |
| 6 | التقييم المالي | financial_eval | ⚠️ يحتاج اختبار |
| 7 | اعتماد العرض | quotation_approval | ⚠️ يحتاج اختبار |
| 8 | التعاقد | contracting | ⚠️ يحتاج اختبار |
| 9 | التنفيذ | execution | ⚠️ يحتاج اختبار |
| 10 | الاستلام | handover | ⚠️ يحتاج اختبار |
| 11 | الإغلاق | closed | ⚠️ يحتاج اختبار |

---

## جوانب النقص المكتشفة

### 1. مشاكل تقنية (تم إصلاحها)

- [x] قائمة المراحل في `requests.ts` كانت تستخدم 7 مراحل بدلاً من 11
- [x] التحقق من `quotes_received` لم يكن موجوداً في الشروط المسبقة

### 2. مشاكل تجربة المستخدم (تحتاج معالجة)

#### أ. عدم وضوح سبب عدم إمكانية التحويل
- **المشكلة**: عند الضغط على زر "تحويل للمرحلة التالية" لا يظهر أي رد فعل واضح
- **الحل المقترح**: إضافة رسالة توضيحية تظهر الشروط المطلوبة قبل التحويل

#### ب. غياب مؤشر التحميل عند التحويل
- **المشكلة**: لا يوجد مؤشر تحميل واضح عند النقر على زر التحويل
- **الحل المقترح**: إضافة spinner أو تغيير نص الزر إلى "جاري التحويل..."

#### ج. عدم تتبع المراحل الفرعية
- **المشكلة**: المراحل الفرعية معرفة ولكن لا يتم تتبعها في قاعدة البيانات
- **الحل المقترح**: تفعيل جدول `request_stage_tracking` لتتبع كل خطوة فرعية

### 3. ميزات مفقودة

#### أ. صفحات مخصصة للمراحل الجديدة
- [ ] صفحة إدارة جدول الكميات (boq_preparation)
- [ ] صفحة اعتماد العرض (quotation_approval)
- [ ] صفحة التعاقد (contracting)
- [ ] صفحة الاستلام (handover)

#### ب. نظام التنبيهات التلقائية
- [ ] إشعار عند الانتقال لمرحلة جديدة
- [ ] تذكير بالمهام المتأخرة
- [ ] إشعار للمسؤول عن المرحلة التالية

#### ج. تقارير الأداء
- [ ] تقرير الوقت المستغرق في كل مرحلة
- [ ] تقرير معدلات الإنجاز
- [ ] تقرير الاختناقات (المراحل المتأخرة)

### 4. تحسينات مقترحة

#### أ. شريط التقدم
- [ ] إضافة tooltip يظهر تفاصيل كل مرحلة عند التمرير
- [ ] إظهار الوقت المتوقع للمرحلة التالية
- [ ] تلوين المراحل المتأخرة باللون الأحمر

#### ب. صفحة تفاصيل الطلب
- [ ] إضافة قسم "الخطوات التالية" يوضح ما يجب فعله
- [ ] إظهار قائمة المتطلبات للانتقال للمرحلة التالية
- [ ] إضافة زر "طلب مساعدة" للتواصل مع الدعم

#### ج. لوحة التحكم
- [ ] إضافة widget يعرض الطلبات المتأخرة
- [ ] إضافة رسم بياني يوضح توزيع الطلبات على المراحل
- [ ] إضافة تنبيهات للمهام العاجلة

---

## خطة العمل المقترحة

### المرحلة الأولى (عاجل)
1. إصلاح مشكلة عدم ظهور رسالة الخطأ عند فشل التحويل
2. إضافة مؤشر تحميل واضح
3. تحسين رسائل الخطأ لتكون أكثر وضوحاً

### المرحلة الثانية (مهم)
1. إنشاء صفحات مخصصة للمراحل الجديدة
2. تفعيل تتبع المراحل الفرعية
3. إضافة نظام التنبيهات الأساسي

### المرحلة الثالثة (تحسينات)
1. إضافة تقارير الأداء
2. تحسين شريط التقدم
3. إضافة لوحة متابعة شاملة

---

## ملاحظات إضافية

- الطلب الحالي في مرحلة "التقييم المالي" ولديه عرض سعر واحد
- يجب اعتماد عرض السعر قبل التحويل لمرحلة "اعتماد العرض"
- الشروط المسبقة للتحويل مفعلة وتعمل بشكل صحيح
