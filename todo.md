# TODO - بوابة تمام للعناية بالمساجد

## المرحلة 51: إصلاح المشاكل الحرجة
- [x] إصلاح ترتيب مراحل الزيارة الميدانية (الخطأ: يطلب تقرير قبل الجدولة!)
  - المشكلة: النظام يطلب تقرير ميداني قبل جدولة الزيارة (منطقياً التقرير يأتي بعد الزيارة)
  - الحل: تعديل stageActionConfig ليحتوي على 4 مراحل: إسناد → جدولة → تنفيذ → تقرير
- [x] إصلاح صفحة المستخدمين (التحديثات لم تظهر)
  - المشكلة: التعديلات على الأزرار والخدمات لم تظهر في الواجهة
  - الحل: استبدال Users.tsx بـ UsersManagement.tsx في App.tsx
- [x] التحقق من واجهة تخصيص الصلاحيات
  - النتيجة: نظام الصلاحيات موجود ومكتمل 100% ويعمل بشكل ممتاز
  - الميزات: إسناد أدوار، صلاحيات فردية، 10 أقسام × 7 صلاحيات لكل قسم

## المرحلة 52: إصلاح منطق أزرار الزيارة الميدانية (المشكلة لا زالت قائمة!)
- [ ] المشكلة: زر "جدولة الزيارة" يحاول الانتقال للمرحلة التالية بدلاً من فتح نافذة الجدولة فقط
- [ ] الحل المطلوب: تغيير منطق الأزرار لتكون إجراءات داخلية (internal actions) بدلاً من الانتقال للمرحلة التالية
- [ ] التسلسل الصحيح: جدولة (dialog) → تنفيذ (dialog) → رفع تقرير (dialog) → ثم الانتقال للمرحلة التالية

## المرحلة 53: إنشاء صفحات الزيارة الميدانية
- [x] إنشاء صفحة جدولة الزيارة (/field-visits/schedule/:requestId)
  - نموذج لتحديد تاريخ ووقت الزيارة
  - اختيار الفريق الميداني
  - حفظ البيانات في قاعدة البيانات
- [x] إنشاء صفحة تنفيذ الزيارة (/field-visits/execute/:requestId)
  - نموذج لتأكيد تنفيذ الزيارة
  - تسجيل تاريخ التنفيذ الفعلي
  - ملاحظات التنفيذ
- [x] إنشاء جدول field_visits في قاعدة البيانات
- [x] إنشاء fieldVisitsRouter في Backend
- [x] إضافة المسارات الثلاثة في App.tsx
- [x] تعديل constants.ts لإضافة redirectUrl لزر field_visit
- [ ] إصلاح checkCompletion في stageActionConfig.ts (يبحث عن حقول غير موجودة في request)
- [ ] اختبار التدفق الكامل: جدولة → تنفيذ → رفع تقرير → انتقال للمرحلة التالية
